<c:FragmentDefinition
	xmlns="sap.m"
	xmlns:c="sap.ui.core">
    <Panel>
        <headerToolbar>
            <Toolbar>
                <c:Icon src="{= ${incidenceModel>Type}==='0' ? 'sap-icon://accept' : 
                                ${incidenceModel>Type}==='1' ? 'sap-icon://alert' :
                                ${incidenceModel>Type}==='2' ? 'sap-icon://decline' : '' }"/>
                <Title text="{i18n>incidence}  {= ${incidenceModel>IncidenceId} ? parseInt(${incidenceModel>IncidenceId}) : ''} {path : 'incidenceModel>CreationDate',
                                                                      formatter: '.Formatter.dateFormat'}"/>
                <ToolbarSpacer/>
                <Button icon="sap-icon://save" press="onSaveIncidence" enabled="{= ${incidenceModel>EnabledSave} === true}"/>
                <c:Icon src="delete" press="onDeleteIncidence"/>
            </Toolbar>
        </headerToolbar>
        <content>
            <HBox>
                <VBox class="sapUiSmallMarginEnd">
                    <Label text="{i18n>incidenceDate}" required="true"/>
                    <DatePicker dateValue="{incidenceModel>CreationDate}" change="updateIncidenceCreationDate" valueState="{incidenceModel>CreationDateState}"/>
                </VBox>
                <VBox visible="{= ${incidenceModel>CreationDate} !== '' &amp;&amp; ${incidenceModel>CreationDate} !== undefined}" class="sapUiSmallMarginEnd">
                    <Label text="{i18n>incidenceReason}" required="true"/>
                    <Input value="{incidenceModel>Reason}" change="updateIncidenceReason" valueState="{incidenceModel>ReasonState}"/>
                </VBox>
                <VBox visible="{= ${incidenceModel>CreationDate} !== '' &amp;&amp; ${incidenceModel>CreationDate} !== undefined}">
                    <Text text="{i18n>incidenceType}"/>
                    <Select selectedKey="{incidenceModel>Type}" forceSelection="false" change="updateIncidenceType">
                        <c:Item key="0" text="{i18n>incidenceCorrect}"/>
                        <c:Item key="1" text="{i18n>incidencePending}"/>
                        <c:Item key="2" text="{i18n>incidenceError}"/>
                    </Select>
                </VBox>
            </HBox>
        </content>
    </Panel>
</c:FragmentDefinition>
